@layer molecule {
  /* Enhanced Glass Morphism for cards and panels */
  .glass-panel {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    position: relative;
    overflow: hidden;
  }

  /* Noise texture overlay for realistic glass effect */
  .glass-panel::before {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0.03;
    background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)"/></svg>');
    pointer-events: none;
  }

  /* Top edge highlight for glass refraction effect */
  .glass-panel::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.3) 20%,
      rgba(255, 255, 255, 0.3) 80%,
      transparent
    );
    pointer-events: none;
  }

  /* Frosted glass variant with more blur */
  .glass-frosted {
    backdrop-filter: blur(30px) saturate(200%) brightness(110%);
    -webkit-backdrop-filter: blur(30px) saturate(200%) brightness(110%);
    background: rgba(255, 255, 255, 0.08);
  }

  /* Light refraction on edges */
  .glass-panel-refraction {
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.1),
      0 10px 40px rgba(0, 0, 0, 0.2);
  }

  /* Hover state with increased clarity */
  .glass-panel:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(25px) saturate(200%);
    -webkit-backdrop-filter: blur(25px) saturate(200%);
  }

  /* Light mode adjustments */
  @media (prefers-color-scheme: light) {
    .glass-panel {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(20px) saturate(180%) brightness(105%);
      -webkit-backdrop-filter: blur(20px) saturate(180%) brightness(105%);
      border-color: rgba(255, 255, 255, 0.8);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    }

    .glass-panel::before {
      opacity: 0.02;
    }

    .glass-panel::after {
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.8) 20%,
        rgba(255, 255, 255, 0.8) 80%,
        transparent
      );
    }

    .glass-panel:hover {
      background: rgba(255, 255, 255, 0.85);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
    }

    .glass-frosted {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(30px) saturate(180%) brightness(103%);
      -webkit-backdrop-filter: blur(30px) saturate(180%) brightness(103%);
    }
  }

  /* Apply enhanced glass morphism to existing elements */
  .project-card,
  .blog-card,
  .timeline-content,
  .skill-category,
  .about-skills {
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    position: relative;
  }

  /* Add noise texture to cards */
  .project-card::before,
  .blog-card::before {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0.03;
    background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)"/></svg>');
    pointer-events: none;
    border-radius: inherit;
    z-index: 0;
  }

  /* Ensure content is above noise texture */
  .project-card > *,
  .blog-card > * {
    position: relative;
    z-index: 1;
  }

  /* Enhanced edge highlights on cards */
  .project-card {
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      0 10px 40px rgba(0, 0, 0, 0.15);
  }

  .project-card:hover {
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.12),
      0 15px 50px rgba(102, 126, 234, 0.25);
  }

  @media (prefers-color-scheme: light) {
    .project-card,
    .blog-card {
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.9),
        0 4px 16px rgba(0, 0, 0, 0.06);
    }

    .project-card:hover {
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 1),
        0 8px 24px rgba(102, 126, 234, 0.15);
    }
  }
}
